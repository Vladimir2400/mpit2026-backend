# –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Dating App Backend

**–í–µ—Ä—Å–∏—è**: MVP 0.1
**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-12-04
**–¶–µ–ª—å**: –•–∞–∫–∞—Ç–æ–Ω MPIT 2026 (3-5 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

```
–î–µ–Ω—å 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞                    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
–î–µ–Ω—å 2: –ü—Ä–æ—Ñ–∏–ª–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏            ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0%
–î–µ–Ω—å 3: –°–≤–∞–π–ø—ã –∏ –º–∞—Ç—á–∏                    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0%
–î–µ–Ω—å 4: –ß–∞—Ç –∏ –ø–æ–¥–ø–∏—Å–∫–∏                    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0%
–î–µ–Ω—å 5: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç—ã                 ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0%

–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å MVP:                       ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  20%
```

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üèóÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (100%)

#### ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [x] Go –º–æ–¥—É–ª—å (`go.mod`)
- [x] Clean Architecture —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
- [x] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (Gin, GORM, JWT, Redis, Viper, etc.)
- [x] `.gitignore` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] `.env.example` –∏ `.env` —Å–æ–∑–¥–∞–Ω—ã

#### ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] `internal/config/config.go` - –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —á–µ—Ä–µ–∑ Viper
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ environment variables
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Server, DB, Redis, JWT, Encryption)

#### ‚úÖ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- [x] `docker-compose.yml` - PostgreSQL 15 + Redis 7
- [x] Health checks –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- [x] Volumes –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- [x] –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è

#### ‚úÖ Domain –º–æ–¥–µ–ª–∏ (11 —Ñ–∞–π–ª–æ–≤)
- [x] `user.go` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è 18+, –≥–µ–Ω–¥–µ—Ä, —Ä–æ–ª–∏)
- [x] `profile.go` - –ü—Ä–æ—Ñ–∏–ª–∏ (MBTI, –∏–Ω—Ç–µ—Ä–µ—Å—ã, –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è)
- [x] `swipe.go` - –°–≤–∞–π–ø—ã (left/right/super)
- [x] `match.go` - –ú–∞—Ç—á–∏ (–≤–∑–∞–∏–º–Ω—ã–µ –ª–∞–π–∫–∏)
- [x] `message.go` - –°–æ–æ–±—â–µ–Ω–∏—è –∏ Conversations
- [x] `subscription.go` - –ü–æ–¥–ø–∏—Å–∫–∏ (–ø–ª–∞–Ω—ã, —Å—Ç–∞—Ç—É—Å—ã)
- [x] `verification.go` - KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–º–æ–∫)
- [x] `consent.go` - –°–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–§–ó-152)
- [x] `recommendation.go` - –õ–æ–≥–∏ AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- [x] `errors.go` - –î–æ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

#### ‚úÖ PKG —É—Ç–∏–ª–∏—Ç—ã (100%)
- [x] `pkg/crypto/hash.go` - bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (cost 12)
- [x] `pkg/crypto/encrypt.go` - AES-256-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- [x] `pkg/jwt/jwt.go` - JWT –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (Access + Refresh)
- [x] `pkg/validator/validator.go` - –í–∞–ª–∏–¥–∞—Ü–∏—è (email, phone, password, age, MBTI)

#### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] `migrations/000001_init_schema.up.sql` - –í—Å–µ 11 —Ç–∞–±–ª–∏—Ü
- [x] `migrations/000001_init_schema.down.sql` - Rollback
- [x] –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (GIST, GIN, B-tree)
- [x] Constraints (CHECK, UNIQUE, FK)
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ UUID, –º–∞—Å—Å–∏–≤–æ–≤, JSONB, –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

**–¢–∞–±–ª–∏—Ü—ã –ë–î:**
1. `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. `profiles` - –ü—Ä–æ—Ñ–∏–ª–∏
3. `photos` - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
4. `verification_data` - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
5. `user_consents` - –°–æ–≥–ª–∞—Å–∏—è
6. `swipes` - –°–≤–∞–π–ø—ã
7. `matches` - –ú–∞—Ç—á–∏
8. `conversations` - –ë–µ—Å–µ–¥—ã
9. `messages` - –°–æ–æ–±—â–µ–Ω–∏—è
10. `subscriptions` - –ü–æ–¥–ø–∏—Å–∫–∏
11. `recommendation_logs` - –õ–æ–≥–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

#### ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] `Makefile` - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] `README.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] `STATUS.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

---

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üöß –î–µ–Ω—å 1 (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ) - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏:**
- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (PostgreSQL + Redis)
  - [ ] `repository/postgres/user.go`
  - [ ] `repository/postgres/profile.go`
  - [ ] `repository/postgres/consent.go`
  - [ ] `repository/redis/cache.go`
  - [ ] `repository/redis/session.go`

- [ ] Auth Usecase
  - [ ] `usecase/auth/service.go`
  - [ ] Register (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤–æ–∑—Ä–∞—Å—Ç–∞)
  - [ ] Login (JWT –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
  - [ ] Refresh token
  - [ ] Logout

- [ ] HTTP Layer
  - [ ] `delivery/http/handler/auth.go`
  - [ ] `delivery/http/middleware/auth.go`
  - [ ] `delivery/http/middleware/logger.go`
  - [ ] `delivery/http/middleware/cors.go`
  - [ ] `delivery/http/router.go`

- [ ] Main
  - [ ] `cmd/api/main.go`
  - [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
  - [ ] –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìÖ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –î–µ–Ω—å 2: –ü—Ä–æ—Ñ–∏–ª–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

#### –ü—Ä–æ—Ñ–∏–ª–∏
- [ ] `usecase/profile/service.go` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- [ ] `repository/postgres/profile.go` - CRUD –ø—Ä–æ—Ñ–∏–ª–µ–π
- [ ] `repository/postgres/photo.go` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ
- [ ] `delivery/http/handler/profile.go` - HTTP handlers

**Endpoints:**
- `GET /api/v1/profile` - –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `PUT /api/v1/profile` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `POST /api/v1/profile/photos` - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
- `DELETE /api/v1/profile/photos/:id` - –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ
- `PUT /api/v1/profile/preferences` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–ú–û–ö)
- [ ] `usecase/verification/service.go` - –ú–æ–∫-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] `repository/postgres/verification.go`
- [ ] `delivery/http/handler/verification.go`

**Endpoints:**
- `POST /api/v1/verification/submit` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã (–∞–≤—Ç–æ–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)
- `GET /api/v1/verification/status` - –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### AI –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- [ ] `usecase/recommendation/service.go` - –°–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- [ ] `usecase/recommendation/algorithm.go` - Rule-based –∞–ª–≥–æ—Ä–∏—Ç–º
- [ ] `usecase/recommendation/scoring.go` - Scoring –ª–æ–≥–∏–∫–∞
- [ ] `repository/postgres/recommendation.go` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] `delivery/http/handler/recommendation.go`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
- Cold start (–Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- MBTI —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (30%)
- –û–±—â–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã (40%)
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (20%)
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (10%)
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏

**Endpoints:**
- `GET /api/v1/recommendations` - –õ–µ–Ω—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (limit, offset)

### –î–µ–Ω—å 3: –°–≤–∞–π–ø—ã –∏ –º–∞—Ç—á–∏

#### –°–≤–∞–π–ø—ã
- [ ] `usecase/swipe/service.go` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–æ–≤
- [ ] `repository/postgres/swipe.go` - –ò—Å—Ç–æ—Ä–∏—è —Å–≤–∞–π–ø–æ–≤
- [ ] `delivery/http/handler/swipe.go`

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ (–º—É–∂—á–∏–Ω—ã)
- –î–µ—Ç–µ–∫—Ü–∏—è –≤–∑–∞–∏–º–Ω–æ–≥–æ –ª–∞–π–∫–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ popularity_score
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è AI

**Endpoints:**
- `POST /api/v1/swipes` - –°–≤–∞–π–ø–Ω—É—Ç—å (body: {swiped_user_id, direction})
- `GET /api/v1/swipes/history` - –ò—Å—Ç–æ—Ä–∏—è —Å–≤–∞–π–ø–æ–≤

#### –ú–∞—Ç—á–∏
- [ ] `usecase/match/service.go` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç—á–∞–º–∏
- [ ] `repository/postgres/match.go` - CRUD –º–∞—Ç—á–µ–π
- [ ] `delivery/http/handler/match.go`

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –≤–∑–∞–∏–º–Ω–æ–º right swipe
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ conversation
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (mock –¥–ª—è MVP)
- –†–∞–∑–º—ç—Ç—á (unmatch)

**Endpoints:**
- `GET /api/v1/matches` - –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏
- `GET /api/v1/matches/:id` - –î–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞
- `DELETE /api/v1/matches/:id` - –†–∞–∑–º—ç—Ç—á–∏—Ç—å

### –î–µ–Ω—å 4: –ß–∞—Ç –∏ –ø–æ–¥–ø–∏—Å–∫–∏

#### –ß–∞—Ç
- [ ] `usecase/chat/service.go` - –°–µ—Ä–≤–∏—Å —á–∞—Ç–∞
- [ ] `usecase/chat/encryption.go` - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] `repository/postgres/message.go` - –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] `repository/postgres/conversation.go` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–µ–¥–∞–º–∏
- [ ] `delivery/http/handler/chat.go`

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
- AES-256-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∞—Å—Ç–∏—è –≤ conversation
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ last_message_preview
- Mark as read
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

**Endpoints:**
- `GET /api/v1/conversations` - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ (—Å –ø—Ä–µ–≤—å—é)
- `GET /api/v1/conversations/:id` - –î–µ—Ç–∞–ª–∏ –±–µ—Å–µ–¥—ã
- `GET /api/v1/conversations/:id/messages` - –°–æ–æ–±—â–µ–Ω–∏—è (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- `POST /api/v1/conversations/:id/messages` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `PUT /api/v1/conversations/:id/read` - –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- `DELETE /api/v1/messages/:id` - –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (soft delete)

#### –ü–æ–¥–ø–∏—Å–∫–∏ (–ú–û–ö)
- [ ] `usecase/subscription/service.go` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- [ ] `repository/postgres/subscription.go`
- [ ] `delivery/http/handler/subscription.go`

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
- –ú—É–∂—á–∏–Ω—ã: –ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (–º–æ–∫ - –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- –ñ–µ–Ω—â–∏–Ω—ã: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ (–§–ó-69)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫–∏

**Endpoints:**
- `GET /api/v1/subscriptions/plans` - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã
- `GET /api/v1/subscriptions/current` - –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- `POST /api/v1/subscriptions` - –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É (–º–æ–∫)
- `DELETE /api/v1/subscriptions/:id` - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

### –î–µ–Ω—å 5: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç—ã

#### –î–æ—Ä–∞–±–æ—Ç–∫–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (unified error responses)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] Seed –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ
- [ ] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ)

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit —Ç–µ—Å—Ç—ã (critical usecase logic)
  - [ ] Recommendation algorithm
  - [ ] Match creation
  - [ ] Message encryption
  - [ ] JWT validation
- [ ] Integration —Ç–µ—Å—Ç—ã
  - [ ] Auth flow
  - [ ] Swipe ‚Üí Match flow
  - [ ] Chat flow

#### Performance
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î
- [ ] Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (profiles, recommendations)
- [ ] Query optimization

---

## üéØ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ API Endpoints

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/v1/auth`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Body |
|-------|----------|----------|--------|------|
| POST | `/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚è≥ Planned | `{email, phone, password, gender, birth_date}` |
| POST | `/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É | ‚è≥ Planned | `{email/phone, password}` |
| POST | `/refresh` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token | ‚è≥ Planned | `{refresh_token}` |
| POST | `/logout` | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã | ‚è≥ Planned | - |

**Response:**
```json
{
  "access_token": "eyJhbGc...",
  "refresh_token": "eyJhbGc...",
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "gender": "male",
    "role": "user"
  }
}
```

---

### üë§ –ü—Ä–æ—Ñ–∏–ª—å (`/api/v1/profile`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| GET | `/profile` | –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å | ‚è≥ Planned | ‚úÖ Required |
| PUT | `/profile` | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å | ‚è≥ Planned | ‚úÖ Required |
| GET | `/profile/:user_id` | –ü–æ–ª—É—á–∏—Ç—å —á—É–∂–æ–π –ø—Ä–æ—Ñ–∏–ª—å | ‚è≥ Planned | ‚úÖ Required |
| GET | `/preferences` | –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞ | ‚è≥ Planned | ‚úÖ Required |
| PUT | `/preferences` | –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | ‚è≥ Planned | ‚úÖ Required |

**Update Profile Body:**
```json
{
  "display_name": "–ò–≤–∞–Ω",
  "bio": "–õ—é–±–ª—é –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è",
  "city": "–ú–æ—Å–∫–≤–∞",
  "mbti_type": "INTJ",
  "interests": ["–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è", "–∫–∏–Ω–æ", "—Å–ø–æ—Ä—Ç"],
  "location_lat": 55.7558,
  "location_lon": 37.6173,
  "pref_min_age": 25,
  "pref_max_age": 35,
  "pref_max_distance_km": 50,
  "pref_gender": "female"
}
```

---

### üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (`/api/v1/profile/photos`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| POST | `/photos` | –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ | ‚è≥ Planned | ‚úÖ Required |
| GET | `/photos` | –°–ø–∏—Å–æ–∫ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è | ‚è≥ Planned | ‚úÖ Required |
| PUT | `/photos/:id/primary` | –°–¥–µ–ª–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º | ‚è≥ Planned | ‚úÖ Required |
| PUT | `/photos/:id/order` | –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ | ‚è≥ Planned | ‚úÖ Required |
| DELETE | `/photos/:id` | –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ | ‚è≥ Planned | ‚úÖ Required |

**Upload Body:**
```
Content-Type: multipart/form-data
file: [binary]
order_index: 0
is_primary: true
```

---

### ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/v1/verification`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| POST | `/submit` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã | ‚è≥ Planned | ‚úÖ Required |
| GET | `/status` | –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ | ‚è≥ Planned | ‚úÖ Required |
| POST | `/consent` | –î–∞—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –±–∏–æ–º–µ—Ç—Ä–∏—é | ‚è≥ Planned | ‚úÖ Required |

**Submit Body (–ú–û–ö - –∞–≤—Ç–æ–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è):**
```json
{
  "selfie_photo_url": "/uploads/selfie.jpg",
  "passport_photo_url": "/uploads/passport.jpg",
  "biometric_consent_given": true
}
```

---

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (`/api/v1/recommendations`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| GET | `/` | –õ–µ–Ω—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π | ‚è≥ Planned | ‚úÖ Required |

**Query params:**
- `limit` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (default: 20)
- `offset` - –°–º–µ—â–µ–Ω–∏–µ (pagination)

**Response:**
```json
{
  "recommendations": [
    {
      "user_id": "uuid",
      "profile": {
        "display_name": "–ê–Ω–Ω–∞",
        "age": 28,
        "city": "–ú–æ—Å–∫–≤–∞",
        "bio": "...",
        "photos": [...],
        "mbti_type": "ENFP",
        "interests": ["–º—É–∑—ã–∫–∞", "–π–æ–≥–∞"]
      },
      "compatibility_score": 0.85,
      "reasoning": {
        "mbti_match": true,
        "shared_interests": 3,
        "distance_km": 5.2
      },
      "distance_km": 5.2
    }
  ],
  "total": 150,
  "has_more": true
}
```

---

### üëÜ –°–≤–∞–π–ø—ã (`/api/v1/swipes`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| POST | `/` | –°–≤–∞–π–ø–Ω—É—Ç—å –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å | ‚è≥ Planned | ‚úÖ Required |
| GET | `/history` | –ò—Å—Ç–æ—Ä–∏—è —Å–≤–∞–π–ø–æ–≤ | ‚è≥ Planned | ‚úÖ Required |
| GET | `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–≤–∞–π–ø–æ–≤ | ‚è≥ Planned | ‚úÖ Required |

**Swipe Body:**
```json
{
  "swiped_user_id": "uuid",
  "direction": "right"  // "left", "right", "super"
}
```

**Response –ø—Ä–∏ –º–∞—Ç—á–µ:**
```json
{
  "success": true,
  "match": {
    "id": "uuid",
    "matched_user": {...},
    "matched_at": "2025-12-04T12:00:00Z"
  }
}
```

---

### üíï –ú–∞—Ç—á–∏ (`/api/v1/matches`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| GET | `/` | –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏ | ‚è≥ Planned | ‚úÖ Required |
| GET | `/:id` | –î–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞ | ‚è≥ Planned | ‚úÖ Required |
| DELETE | `/:id` | –†–∞–∑–º—ç—Ç—á–∏—Ç—å | ‚è≥ Planned | ‚úÖ Required |

**Response:**
```json
{
  "matches": [
    {
      "id": "uuid",
      "matched_user": {
        "id": "uuid",
        "display_name": "–ú–∞—Ä–∏—è",
        "age": 27,
        "photos": [...]
      },
      "matched_at": "2025-12-04T10:30:00Z",
      "conversation_id": "uuid",
      "last_message": "–ü—Ä–∏–≤–µ—Ç!",
      "unread_count": 2
    }
  ],
  "total": 15
}
```

---

### üí¨ –ß–∞—Ç (`/api/v1/conversations`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| GET | `/` | –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ | ‚è≥ Planned | ‚úÖ Required |
| GET | `/:id` | –î–µ—Ç–∞–ª–∏ –±–µ—Å–µ–¥—ã | ‚è≥ Planned | ‚úÖ Required |
| GET | `/:id/messages` | –°–æ–æ–±—â–µ–Ω–∏—è | ‚è≥ Planned | ‚úÖ Required |
| POST | `/:id/messages` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ | ‚è≥ Planned | ‚úÖ Required |
| PUT | `/:id/read` | –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º | ‚è≥ Planned | ‚úÖ Required |
| DELETE | `/messages/:id` | –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ | ‚è≥ Planned | ‚úÖ Required |

**Send Message Body:**
```json
{
  "content": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
}
```

**Messages Response:**
```json
{
  "messages": [
    {
      "id": "uuid",
      "sender_id": "uuid",
      "content": "–ü—Ä–∏–≤–µ—Ç!",  // –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ
      "is_read": true,
      "created_at": "2025-12-04T12:00:00Z"
    }
  ],
  "has_more": true,
  "total": 48
}
```

---

### üí≥ –ü–æ–¥–ø–∏—Å–∫–∏ (`/api/v1/subscriptions`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| GET | `/plans` | –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã | ‚è≥ Planned | - |
| GET | `/current` | –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ | ‚è≥ Planned | ‚úÖ Required |
| POST | `/` | –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É (–º–æ–∫) | ‚è≥ Planned | ‚úÖ Required |
| DELETE | `/:id` | –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É | ‚è≥ Planned | ‚úÖ Required |
| POST | `/consent` | –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ | ‚è≥ Planned | ‚úÖ Required |

**Plans Response:**
```json
{
  "plans": [
    {
      "type": "monthly",
      "price_cents": 0,  // –ú–û–ö: –±–µ—Å–ø–ª–∞—Ç–Ω–æ
      "duration_days": 30,
      "features": [
        "Unlimited swipes",
        "See who liked you",
        "Super likes",
        "Compatibility score"
      ]
    }
  ]
}
```

---

### üîß –°–ª—É–∂–µ–±–Ω—ã–µ (`/`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | Auth |
|-------|----------|----------|--------|------|
| GET | `/health` | Health check | ‚è≥ Planned | - |
| GET | `/api/v1/privacy-policy` | –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ | ‚è≥ Planned | - |

---

## üé® –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Response

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "success": true,
  "data": { ... },
  "message": "Operation successful"
}
```

### –û—à–∏–±–∫–∞
```json
{
  "success": false,
  "error": {
    "code": "INVALID_CREDENTIALS",
    "message": "Invalid email or password",
    "details": { ... }
  }
}
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã (Access: 15 –º–∏–Ω, Refresh: 30 –¥–Ω–µ–π)
- ‚úÖ bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (cost 12)
- ‚úÖ AES-256-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ SQL Injection –∑–∞—â–∏—Ç–∞ (GORM)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ 18+ (–ë–î constraint)

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- ‚è≥ CORS middleware
- ‚è≥ Rate limiting (Redis)
- ‚è≥ Request logging
- ‚è≥ XSS –∑–∞—â–∏—Ç–∞
- ‚è≥ CSRF —Ç–æ–∫–µ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ MVP
- [ ] Prometheus metrics
- [ ] Grafana dashboards
- [ ] Error tracking (Sentry)
- [ ] Performance monitoring
- [ ] Database query analytics

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
make setup              # –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (docker + migrations)

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make dev                # –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (docker + run)
make run                # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make docker-up          # –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL + Redis
make migrate-up         # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test               # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

# –£—Ç–∏–ª–∏—Ç—ã
make seed               # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
make clean              # –û—á–∏—Å—Ç–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### MVP –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- üî∏ –ß–∞—Ç —á–µ—Ä–µ–∑ REST API (–Ω–µ WebSocket)
- üî∏ –ú–æ–∫-–ø–æ–¥–ø–∏—Å–∫–∏ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π)
- üî∏ –ú–æ–∫-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
- üî∏ –ë–µ–∑ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- üî∏ –ë–µ–∑ admin –ø–∞–Ω–µ–ª–∏

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ—Å–ª–µ MVP
- üöÄ WebSocket –¥–ª—è real-time —á–∞—Ç–∞
- üí∞ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆKassa
- üß† ML —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (Python + gRPC)
- üì± Push notifications (FCM)
- üõ°Ô∏è Admin panel
- üîç PostGIS –¥–ª—è –≥–µ–æ–ø–æ–∏—Å–∫–∞
- ‚ö° Advanced rate limiting

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–ü—Ä–æ–µ–∫—Ç**: MPIT 2026 Hackathon
**Backend**: Dating App MVP
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Clean Architecture
**–Ø–∑—ã–∫**: Go 1.21+

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-12-04
**–°–ª–µ–¥—É—é—â–∞—è —Ü–µ–ª—å**: –ó–∞–≤–µ—Ä—à–∏—Ç—å –î–µ–Ω—å 1 - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚úÖ
